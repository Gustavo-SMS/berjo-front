import{r as y,s as S,j as k,c,d as r,e as t,f as v,v as f,i as R,n as $,p as I,k as T,F as C,l as V,t as q,_ as B,u as O,b as N,q as U,w as E,a as M,g as A}from"./index-Chl9v83D.js";import{_ as j,a as F,b as L}from"./SelectType-CqAM3HUV.js";const x={class:"row mb-3"},P={class:"col-1"},z={class:"col-2"},H={class:"col-4",id:"selectBlindType"},J={class:"col-1"},Q={class:"col-1"},W={class:"col-1"},G={class:"col-1"},K=["value"],X={class:"col-12 mt-2"},Y={__name:"CreateOrderRow",props:["row"],emits:["updateRow","selectedBlindTypeId"],setup(n){const a=y(null),d=y(""),g=y(""),b=(l,e)=>{a.value=e[l.target.selectedIndex]||null},h=(l,e)=>{d.value=e[l.target.selectedIndex].id||""},u=S(()=>a.value?{Vertical:["Lateral","Central","Invertida"],Horizontal:["Dir","Esq"],Rolo:["Dir","Esq","Duplex"],Romana:["Dir","Esq","Duplex"],"Double Vision":["Dir","Esq","Duplex"]}[a.value]||[]:[]);return k(a,()=>{d.value="",g.value=""}),(l,e)=>(r(),c("div",x,[t("div",P,[v(t("input",{type:"number",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=o=>n.row.quantity=o),onInput:e[1]||(e[1]=o=>l.$emit("updateRow",{field:"quantity",value:n.row.quantity}))},null,544),[[f,n.row.quantity]])]),t("div",z,[R(j,{onSelectedOption:b})]),t("div",H,[a.value?(r(),$(F,{key:a.value,typeValue:a.value,onSelectedOption:h,onChange:e[2]||(e[2]=o=>l.$emit("updateRow",{field:"type_id",value:d.value}))},null,8,["typeValue"])):I("",!0)]),t("div",J,[v(t("input",{type:"number",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=o=>n.row.width=o),onInput:e[4]||(e[4]=o=>l.$emit("updateRow",{field:"width",value:n.row.width}))},null,544),[[f,n.row.width]])]),t("div",Q,[v(t("input",{type:"number",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=o=>n.row.height=o),onInput:e[6]||(e[6]=o=>l.$emit("updateRow",{field:"height",value:n.row.height}))},null,544),[[f,n.row.height]])]),t("div",W,[v(t("input",{type:"number",class:"form-control","onUpdate:modelValue":e[7]||(e[7]=o=>n.row.command_height=o),onInput:e[8]||(e[8]=o=>l.$emit("updateRow",{field:"command_height",value:n.row.command_height}))},null,544),[[f,n.row.command_height]])]),t("div",G,[u.value.length?v((r(),c("select",{key:0,class:"form-control","onUpdate:modelValue":e[9]||(e[9]=o=>n.row.model=o),onChange:e[10]||(e[10]=o=>l.$emit("updateRow",{field:"model",value:n.row.model}))},[e[13]||(e[13]=t("option",{value:"",disabled:""},null,-1)),(r(!0),c(C,null,V(u.value,o=>(r(),c("option",{key:o,value:o},q(o),9,K))),128))],544)),[[T,n.row.model]]):I("",!0)]),t("div",X,[v(t("input",{type:"text",class:"form-control",placeholder:"Observações","onUpdate:modelValue":e[11]||(e[11]=o=>n.row.observation=o),onInput:e[12]||(e[12]=o=>l.$emit("updateRow",{field:"observation",value:n.row.observation}))},null,544),[[f,n.row.observation]])])]))}},Z={class:"container"},_={key:0,class:"mb-3"},ee={__name:"CreateOrdersView",setup(n){const a="https://api-berjo.onrender.com",d=O(),g=M(),b=N(),h=y(""),u=y([]);function l(){u.value.push({quantity:"",type_id:"",width:"",height:"",command_height:"",model:"",observation:""})}function e(m,s,i){u.value[m][s]=i}function o(m,s){h.value=s[m.target.selectedIndex].id}const D=async m=>{m.preventDefault();const s={customer:d.userRole==="ADMIN"?h.value:d.customerId,blinds:u.value};try{const i=await A(`${a}/orders`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)},d,g);if(!i.ok){const p=await i.json();throw new Error(p.error||"Erro ao criar pedido")}b.addNotification("Pedido criado com sucesso!","success")}catch(i){console.log(i.message),b.addNotification(i.message,"error")}};return(m,s)=>(r(),c("div",Z,[t("form",{onSubmit:E(D,["prevent"])},[U(d).userRole==="ADMIN"?(r(),c("div",_,[s[0]||(s[0]=t("label",{for:"selectCustomer",class:"form-label"},"Cliente",-1)),R(L,{id:"selectCustomer",onSelectedOption:o})])):I("",!0),s[1]||(s[1]=t("div",{class:"header-row"},[t("span",null,"Quantidade"),t("span",null,"Tipo"),t("span",null,"Coleção - Cor"),t("span",null,"Largura"),t("span",null,"Altura"),t("span",null,"Alt. Comando"),t("span",null,"Modelo")],-1)),(r(!0),c(C,null,V(u.value,(i,p)=>(r(),$(Y,{key:p,row:i,onUpdateRow:w=>e(p,w.field,w.value),onSelectedBlindTypeId:w=>m.selectedBlindTypeId(p,w.field,w.value)},null,8,["row","onUpdateRow","onSelectedBlindTypeId"]))),128)),s[2]||(s[2]=t("button",{type:"submit",class:"btn btn-primary w-100 mt-4"},"Enviar",-1))],32),t("button",{onClick:l,class:"btn btn-outline-secondary w-100 mt-3"},"Add linha")]))}},ne=B(ee,[["__scopeId","data-v-289e8207"]]);export{ne as default};
