import{_ as $,u as q,b as F,r as i,c as a,e as n,n as S,f as u,v as d,t as c,q as M,F as U,p as j,w as P,T as H,g as R,a as J,d as o}from"./index-BV1mUEsg.js";import{C as L}from"./ConfirmationModal-DAmnHIhG.js";const O={key:1},W={key:1},Z={key:1},G={key:1},K={key:1},Q={key:1},X={key:1},Y={key:1},_={key:1},ee={class:"actions"},te={__name:"CustomerRow",props:["id","name","email","phone","street","house_number","city","district","zip","debt","getCustomers"],setup(r){const D=J(),p=q(),v=F(),V="https://api-berjo.onrender.com",s=r,y=i(!1),A=()=>{y.value=!0},l=i(!1);let z=i(!0);const b=()=>{l.value=!l.value,z.value=!z.value},f=i(s.name),k=i(s.email),h=i(s.phone),C=i(s.street),w=i(s.house_number),g=i(s.city),E=i(s.district),x=i(s.zip),N=i(s.debt),T=async m=>{m.preventDefault();const e={id:s.id,name:f.value,email:k.value,phone:h.value,street:C.value,house_number:w.value,city:g.value,district:E.value,zip:x.value,debt:N.value};try{const t=await R(`${V}/customers`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},p,D);if(!t.ok){const I=await t.json();throw new Error(I.error||"Erro ao atualizar cliente")}v.addNotification("Cliente atualizado com sucesso!","success"),s.getCustomers(),b()}catch(t){console.error("Erro ao enviar os dados:",t.message),v.addNotification(t.message,"error")}},B=async()=>{try{const m=await R(`${V}/customers/${s.id}`,{method:"DELETE",headers:{"Content-Type":"application/json"}},p,D);if(!m.ok){const e=await m.json();throw new Error(e.error||"Erro ao excluir cliente")}v.addNotification("Cliente excluÃ­do com sucesso","success"),s.getCustomers()}catch(m){console.error("Erro ao excluir cliente:",m.message),v.addNotification(m.message,"error")}};return(m,e)=>(o(),a(U,null,[n("form",{onSubmit:P(T,["prevent"]),class:"customer-row"},[n("div",null,[l.value?u((o(),a("input",{key:0,type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=t=>f.value=t),id:"name",name:"name"},null,512)),[[d,f.value]]):(o(),a("p",O,c(r.name),1))]),n("div",null,[l.value?u((o(),a("input",{key:0,type:"email",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=t=>k.value=t),id:"email",name:"email"},null,512)),[[d,k.value]]):(o(),a("p",W,c(r.email),1))]),n("div",null,[l.value?u((o(),a("input",{key:0,type:"tel",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=t=>h.value=t),id:"phone",name:"phone"},null,512)),[[d,h.value]]):(o(),a("p",Z,c(r.phone),1))]),n("div",null,[l.value?u((o(),a("input",{key:0,type:"text",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=t=>C.value=t),id:"street",name:"street"},null,512)),[[d,C.value]]):(o(),a("p",G,c(r.street),1))]),n("div",null,[l.value?u((o(),a("input",{key:0,type:"number",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=t=>w.value=t),id:"house_number",name:"house_number"},null,512)),[[d,w.value]]):(o(),a("p",K,c(r.house_number),1))]),n("div",null,[l.value?u((o(),a("input",{key:0,type:"text",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=t=>g.value=t),id:"city",name:"city"},null,512)),[[d,g.value]]):(o(),a("p",Q,c(r.city),1))]),n("div",null,[l.value?u((o(),a("input",{key:0,type:"text",class:"form-control","onUpdate:modelValue":e[6]||(e[6]=t=>E.value=t),id:"district",name:"district"},null,512)),[[d,E.value]]):(o(),a("p",X,c(r.district),1))]),n("div",null,[l.value?u((o(),a("input",{key:0,type:"number",class:"form-control","onUpdate:modelValue":e[7]||(e[7]=t=>x.value=t),id:"zip",name:"zip"},null,512)),[[d,x.value]]):(o(),a("p",Y,c(r.zip),1))]),n("div",null,[l.value&&M(p).userRole==="ADMIN"?u((o(),a("input",{key:0,type:"number",class:"form-control","onUpdate:modelValue":e[8]||(e[8]=t=>N.value=t),id:"debt",name:"debt"},null,512)),[[d,N.value]]):(o(),a("p",_,c(r.debt),1))]),n("div",ee,[l.value?(o(),a(U,{key:0},[n("button",{type:"submit",onClick:T,class:"btn btn-success"},"Confirmar"),n("button",{type:"button",onClick:b,class:"btn btn-secondary"},"Cancelar")],64)):(o(),a(U,{key:1},[n("button",{onClick:b,type:"button",class:"btn btn-primary"},"Editar"),M(p).userRole==="ADMIN"?(o(),a("button",{key:0,onClick:A,type:"button",class:"btn btn-danger"},"Excluir")):j("",!0)],64))])],32),(o(),S(H,{to:"body"},[y.value?(o(),S(L,{key:0,show:y.value,message:"Tem certeza que deseja excluir este cliente?",onConfirm:B,onClose:e[9]||(e[9]=t=>y.value=!1)},null,8,["show"])):j("",!0)]))],64))}},ne=$(te,[["__scopeId","data-v-86cf980c"]]);export{ne as C};
