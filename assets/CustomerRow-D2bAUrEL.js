import{_ as B,u as I,b as $,r as n,c as s,e as l,n as z,p as T,f as u,v as d,t as c,q as N,w as q,T as F,F as P,g as S,a as H,d as o}from"./index-DfWB3UVD.js";import{C as J}from"./ConfirmationModal-Fssvqf8y.js";const L={class:"col-2"},O={key:1},W={class:"col-2"},Z={key:1},G={class:"col-1"},K={key:1},Q={class:"col-2"},X={key:1},Y={class:"col-1"},ee={key:1},te={class:"col-2"},oe={key:1},se={class:"col-1"},ae={key:1},ne={class:"col-1"},le={key:1},ie={class:"col-1"},re={key:1},ue=["disabled"],de={__name:"CustomerRow",props:["id","name","email","phone","street","house_number","city","district","zip","debt","getCustomers"],setup(r){const U=H(),p=I(),v=$(),D="https://api-berjo.onrender.com",a=r,y=n(!1),M=()=>{y.value=!0},i=n(!1);let b=n(!0);const V=()=>{i.value=!i.value,b.value=!b.value},f=n(a.name),h=n(a.email),k=n(a.phone),C=n(a.street),w=n(a.house_number),_=n(a.city),g=n(a.district),E=n(a.zip),x=n(a.debt),j=async m=>{m.preventDefault();const e={id:a.id,name:f.value,email:h.value,phone:k.value,street:C.value,house_number:w.value,city:_.value,district:g.value,zip:E.value,debt:x.value};try{const t=await S(`${D}/customers`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},p,U);if(!t.ok){const A=await t.json();throw new Error(A.error||"Erro ao atualizar cliente")}v.addNotification("Cliente atualizado com sucesso!","success"),a.getCustomers(),V()}catch(t){console.error("Erro ao enviar os dados:",t.message),v.addNotification(t.message,"error")}},R=async()=>{try{const m=await S(`${D}/customers/${a.id}`,{method:"DELETE",headers:{"Content-Type":"application/json"}},p,U);if(!m.ok){const e=await m.json();throw new Error(e.error||"Erro ao excluir cliente")}v.addNotification("Cliente excluÃ­do com sucesso","success"),a.getCustomers()}catch(m){console.error("Erro ao excluir cliente:",m.message),v.addNotification(m.message,"error")}};return(m,e)=>(o(),s(P,null,[l("form",{onSubmit:q(j,["prevent"]),class:"row mb-2"},[l("div",L,[i.value?u((o(),s("input",{key:0,type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=t=>f.value=t),id:"name",name:"name"},null,512)),[[d,f.value]]):(o(),s("p",O,c(r.name),1))]),l("div",W,[i.value?u((o(),s("input",{key:0,type:"email",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=t=>h.value=t),id:"email",name:"email"},null,512)),[[d,h.value]]):(o(),s("p",Z,c(r.email),1))]),l("div",G,[i.value?u((o(),s("input",{key:0,type:"tel",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=t=>k.value=t),id:"phone",name:"phone"},null,512)),[[d,k.value]]):(o(),s("p",K,c(r.phone),1))]),l("div",Q,[i.value?u((o(),s("input",{key:0,type:"text",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=t=>C.value=t),id:"street",name:"street"},null,512)),[[d,C.value]]):(o(),s("p",X,c(r.street),1))]),l("div",Y,[i.value?u((o(),s("input",{key:0,type:"number",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=t=>w.value=t),id:"house_number",name:"house_number"},null,512)),[[d,w.value]]):(o(),s("p",ee,c(r.house_number),1))]),l("div",te,[i.value?u((o(),s("input",{key:0,type:"text",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=t=>_.value=t),id:"city",name:"city"},null,512)),[[d,_.value]]):(o(),s("p",oe,c(r.city),1))]),l("div",se,[i.value?u((o(),s("input",{key:0,type:"text",class:"form-control","onUpdate:modelValue":e[6]||(e[6]=t=>g.value=t),id:"district",name:"district"},null,512)),[[d,g.value]]):(o(),s("p",ae,c(r.district),1))]),l("div",ne,[i.value?u((o(),s("input",{key:0,type:"number",class:"form-control","onUpdate:modelValue":e[7]||(e[7]=t=>E.value=t),id:"zip",name:"zip"},null,512)),[[d,E.value]]):(o(),s("p",le,c(r.zip),1))]),l("div",ie,[i.value&&N(p).userRole==="ADMIN"?u((o(),s("input",{key:0,type:"number",class:"form-control","onUpdate:modelValue":e[8]||(e[8]=t=>x.value=t),id:"debt",name:"debt"},null,512)),[[d,x.value]]):(o(),s("p",re,c(r.debt),1))]),l("button",{onClick:V,type:"button",class:"btn btn-danger col-1"},"Editar"),l("button",{type:"submit",class:"btn btn-primary col-1",disabled:N(b)},"Enviar",8,ue),N(p).userRole==="ADMIN"?(o(),s("button",{key:0,onClick:M,type:"button",class:"btn btn-warning col-1"},"Excluir")):T("",!0)],32),(o(),z(F,{to:"body"},[y.value?(o(),z(J,{key:0,show:y.value,message:"Tem certeza que deseja excluir este cliente?",onConfirm:R,onClose:e[9]||(e[9]=t=>y.value=!1)},null,8,["show"])):T("",!0)]))],64))}},pe=B(de,[["__scopeId","data-v-44c3d1ee"]]);export{pe as C};
