import{u as h,a as v,b as S,r as y,o as $,g,c as r,d as i,F as w,l as _,t as b,j,f as k,k as E,x as V,y as B,q as C}from"./index-DfWB3UVD.js";const O=["value"],x={__name:"SelectCustomers",emits:["selectedOption"],setup(f){const u=h(),p=v(),m=S(),d="https://api-berjo.onrender.com",s=y([]);return $(async()=>{try{const t=await g(`${d}/customers`,{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"},u,p);if(!t.ok)throw new Error("Erro ao buscar clientes");const a=await t.json();s.value=[{id:"",name:""},...a.map(c=>({id:c.id,name:c.name}))]}catch(t){console.log(t.message),m.addNotification(t.message,"error")}}),(t,a)=>(i(),r("select",{onChange:a[0]||(a[0]=c=>t.$emit("selectedOption",c,s.value)),class:"form-select w-25 mb-3","aria-label":"Selecione um cliente"},[(i(!0),r(w,null,_(s.value,(c,n)=>(i(),r("option",{key:n,value:c.id},b(c.name),9,O))),128))],32))}},N=["value"],D={__name:"SelectBlindType",props:["typeValue","collection"],emits:["selectedOption"],setup(f){const u=h(),p=v(),m=S(),d="https://api-berjo.onrender.com",s=f,t=y(s.collection||""),a=y([]);return j(()=>s.typeValue,async n=>{if(n)try{const e=await g(`${d}/blind_types/type/${n}`,{method:"GET",headers:{"Content-type":"application/json"}},u,p);if(!e.ok){const l=await e.json();throw new Error(l.error||"Erro ao buscar coleções")}const o=await e.json();if(a.value=[{collection:"",color:""},...o.map(l=>({id:l.id,collection:l.collection,color:l.color}))],await V(),s.collection){const l=a.value.find(T=>T.collection===s.collection);l&&(t.value=l.collection)}}catch(e){console.log(e.message),m.addNotification(e.message,"error")}},{immediate:!0}),j(()=>s.collection,n=>{if(n){const e=a.find(o=>o.collection===n);e&&(t.value=e.collection)}},{immediate:!0}),(n,e)=>k((i(),r("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>t.value=o),onChange:e[1]||(e[1]=o=>n.$emit("selectedOption",o,a.value)),class:"form-select","aria-label":"Selecione uma coleção"},[(i(!0),r(w,null,_(a.value,(o,l)=>(i(),r("option",{key:l,value:o.collection},b(o.collection+" "+o.color),9,N))),128))],544)),[[E,t.value]])}},G={__name:"SelectType",props:["typeValue"],emits:["selectedOption"],setup(f){const u=h(),p=v(),m=S(),d="https://api-berjo.onrender.com",s=f;let t=B([]);const a=y(s.typeValue||""),c=async()=>{try{const e=await(await g(`${d}/blind_types/type`,{method:"GET",headers:{"Content-type":"application/json"}},u,p)).json();t.splice(0,t.length,...new Set(e.map(o=>o.type))),t.unshift(""),s.typeValue&&t.includes(s.typeValue)&&(a.value=s.typeValue)}catch(n){console.log(n.message),m.addNotification(n.message,"error")}};return $(()=>{c()}),(n,e)=>k((i(),r("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>a.value=o),onChange:e[1]||(e[1]=o=>n.$emit("selectedOption",o,C(t))),class:"form-select","aria-label":"Selecione uma coleção"},[(i(!0),r(w,null,_(C(t),(o,l)=>(i(),r("option",{key:l},b(o),1))),128))],544)),[[E,a.value]])}};export{G as _,D as a,x as b};
