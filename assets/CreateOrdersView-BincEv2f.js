import{r as y,s as k,j as T,c,d as r,e as t,f as p,v as f,i as $,n as I,p as R,k as q,F as C,l as D,t as B,_ as O,u as E,b as N,q as U,w as M,a as A,g as j}from"./index-DmVvP4hk.js";import{_ as L,a as F,b as P}from"./SelectType-DoKLM4R_.js";const x={class:"row mb-3"},z={class:"col-1"},H={class:"col-2"},J={class:"col-4",id:"selectBlindType"},Q={class:"col-1"},W={class:"col-1"},G={class:"col-1"},K={class:"col-1"},X=["value"],Y={class:"col-12 mt-2"},Z={class:"col-12 mt-2"},_={__name:"CreateOrderRow",props:["row"],emits:["updateRow","selectedBlindTypeId","deleteRow"],setup(n){const a=y(null),u=y(""),h=y(""),b=(l,e)=>{a.value=e[l.target.selectedIndex]||null},g=(l,e)=>{u.value=e[l.target.selectedIndex].id||""},m=k(()=>a.value?{Vertical:["Lateral","Central","Invertida"],Horizontal:["Dir","Esq"],Rolo:["Dir","Esq","Duplex"],Romana:["Dir","Esq","Duplex"],"Double Vision":["Dir","Esq","Duplex"]}[a.value]||[]:[]);return T(a,()=>{u.value="",h.value=""}),(l,e)=>(r(),c("div",x,[t("div",z,[p(t("input",{type:"number",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=o=>n.row.quantity=o),min:"1",onInput:e[1]||(e[1]=o=>l.$emit("updateRow",{field:"quantity",value:n.row.quantity}))},null,544),[[f,n.row.quantity]])]),t("div",H,[$(L,{onSelectedOption:b})]),t("div",J,[a.value?(r(),I(F,{key:a.value,typeValue:a.value,onSelectedOption:g,onChange:e[2]||(e[2]=o=>l.$emit("updateRow",{field:"type_id",value:u.value}))},null,8,["typeValue"])):R("",!0)]),t("div",Q,[p(t("input",{type:"number",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=o=>n.row.width=o),min:"0",onInput:e[4]||(e[4]=o=>l.$emit("updateRow",{field:"width",value:n.row.width}))},null,544),[[f,n.row.width]])]),t("div",W,[p(t("input",{type:"number",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=o=>n.row.height=o),min:"0",onInput:e[6]||(e[6]=o=>l.$emit("updateRow",{field:"height",value:n.row.height}))},null,544),[[f,n.row.height]])]),t("div",G,[p(t("input",{type:"number",class:"form-control","onUpdate:modelValue":e[7]||(e[7]=o=>n.row.command_height=o),min:"0",onInput:e[8]||(e[8]=o=>l.$emit("updateRow",{field:"command_height",value:n.row.command_height}))},null,544),[[f,n.row.command_height]])]),t("div",K,[m.value.length?p((r(),c("select",{key:0,class:"form-control","onUpdate:modelValue":e[9]||(e[9]=o=>n.row.model=o),onChange:e[10]||(e[10]=o=>l.$emit("updateRow",{field:"model",value:n.row.model}))},[e[14]||(e[14]=t("option",{value:"",disabled:""},null,-1)),(r(!0),c(C,null,D(m.value,o=>(r(),c("option",{key:o,value:o},B(o),9,X))),128))],544)),[[q,n.row.model]]):R("",!0)]),t("div",Y,[p(t("input",{type:"text",class:"form-control",placeholder:"Observações","onUpdate:modelValue":e[11]||(e[11]=o=>n.row.observation=o),onInput:e[12]||(e[12]=o=>l.$emit("updateRow",{field:"observation",value:n.row.observation}))},null,544),[[f,n.row.observation]])]),t("div",Z,[t("button",{onClick:e[13]||(e[13]=o=>l.$emit("deleteRow",n.row)),class:"btn btn-outline-danger w-100"},"Excluir Linha")])]))}},ee={class:"container"},te={key:0,class:"mb-3"},oe={__name:"CreateOrdersView",setup(n){const a="https://api-berjo.onrender.com",u=E(),h=A(),b=N(),g=y(""),m=y([]);function l(){m.value.push({quantity:"",type_id:"",width:"",height:"",command_height:"",model:"",observation:""})}function e(i,s,d){m.value[i][s]=d}function o(i){m.value.splice(i,1)}function V(i,s){g.value=s[i.target.selectedIndex].id}const S=async i=>{i.preventDefault();const s={customer:u.userRole==="ADMIN"?g.value:u.customerId,blinds:m.value};try{const d=await j(`${a}/orders`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)},u,h);if(!d.ok){const v=await d.json();throw new Error(v.error||"Erro ao criar pedido")}b.addNotification("Pedido criado com sucesso!","success")}catch(d){console.log(d.message),b.addNotification(d.message,"error")}};return(i,s)=>(r(),c("div",ee,[t("form",{onSubmit:M(S,["prevent"])},[U(u).userRole==="ADMIN"?(r(),c("div",te,[s[0]||(s[0]=t("label",{for:"selectCustomer",class:"form-label"},"Cliente",-1)),$(P,{id:"selectCustomer",onSelectedOption:V})])):R("",!0),s[1]||(s[1]=t("div",{class:"header-row"},[t("span",null,"Quantidade"),t("span",null,"Tipo"),t("span",null,"Coleção - Cor"),t("span",null,"Largura"),t("span",null,"Altura"),t("span",null,"Alt. Comando"),t("span",null,"Modelo")],-1)),(r(!0),c(C,null,D(m.value,(d,v)=>(r(),I(_,{key:v,row:d,onUpdateRow:w=>e(v,w.field,w.value),onSelectedBlindTypeId:w=>i.selectedBlindTypeId(v,w.field,w.value),onDeleteRow:w=>o(v)},null,8,["row","onUpdateRow","onSelectedBlindTypeId","onDeleteRow"]))),128)),s[2]||(s[2]=t("button",{type:"submit",class:"btn btn-primary w-100 mt-4"},"Enviar",-1))],32),t("button",{onClick:l,class:"btn btn-outline-secondary w-100 mt-3"},"Add linha")]))}},se=O(oe,[["__scopeId","data-v-114c61f1"]]);export{se as default};
