import{C as f}from"./CustomerRow-Dlb9vk22.js";import{_ as y,u as _,b,r as w,o as C,c,e as n,p as N,h as g,q as B,F as E,l as k,g as m,a as j,d as r,n as x}from"./index-Chl9v83D.js";import"./ConfirmationModal-DQxd9VxQ.js";const A={class:"container"},S={class:"box"},R={key:0,class:"d-flex gap-2 mb-3"},D={__name:"CustomersView",setup(V){const l="https://api-berjo.onrender.com",s=_(),u=j(),v=b(),d=w([]),i=async()=>{try{let t=`${l}/customers`;s.userRole==="CUSTOMER"&&(t+=`/${s.customerId}`);const a=await m(t,{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"},s,u);if(!a.ok){const o=await a.json();throw new Error(o.error||"Erro ao buscar clientes")}const e=await a.json();d.value=Array.isArray(e)?e:[e]}catch(t){console.log(t.message),v.addNotification(t.message,"error")}};C(i);const p=async t=>{t.preventDefault();const a=document.querySelector("#searchByName");if(!a.value)return i();try{const e=await m(`${l}/customers/name/${a.value}`,{method:"GET",headers:{"Content-type":"application/json"}},s,u);if(!e.ok){const h=await e.json();throw new Error(h.error||"Erro ao buscar cliente")}const o=await e.json();d.value=Array.isArray(o)?o:[o]}catch(e){console.log(e.message),v.addNotification(e.message,"error")}};return(t,a)=>(r(),c("div",A,[n("div",S,[B(s).userRole==="ADMIN"?(r(),c("div",R,[a[0]||(a[0]=n("input",{type:"text",id:"searchByName",class:"form-control",placeholder:"Buscar por nome"},null,-1)),n("button",{onClick:p,class:"btn btn-primary"},"Buscar")])):N("",!0),a[1]||(a[1]=g('<div class="row fw-bold mb-2 text-center" data-v-d4c011e1><div class="col-2" data-v-d4c011e1>Nome</div><div class="col-2" data-v-d4c011e1>Email</div><div class="col-1" data-v-d4c011e1>Telefone</div><div class="col-2" data-v-d4c011e1>Rua</div><div class="col-1" data-v-d4c011e1>Número</div><div class="col-2" data-v-d4c011e1>Cidade</div><div class="col-1" data-v-d4c011e1>Bairro</div><div class="col-1" data-v-d4c011e1>CEP</div><div class="col-1" data-v-d4c011e1>Dívida</div></div>',1)),(r(!0),c(E,null,k(d.value,e=>(r(),x(f,{key:e.id,id:e.id,name:e.name,email:e.email,phone:e.phone,street:e.address.street,house_number:e.address.house_number,city:e.address.city,district:e.address.district,zip:e.address.zip,debt:e.debt,getCustomers:i},null,8,["id","name","email","phone","street","house_number","city","district","zip","debt"]))),128))])]))}},I=y(D,[["__scopeId","data-v-d4c011e1"]]);export{I as default};
