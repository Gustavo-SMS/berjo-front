import{a as N,u as $,b as U,r as c,c as r,d as t,e,n as B,p as j,f as h,v as f,t as x,q as D,w as z,T as A,F as V,g as k,_ as I,o as L,l as P}from"./index-DfWB3UVD.js";import{C as q}from"./ConfirmationModal-Fssvqf8y.js";const F={class:"col-2"},G={key:1,class:"mb-0"},W={class:"col-2"},J={key:1,class:"mb-0"},O={class:"col-1"},H={key:1,class:"mb-0"},K={class:"col-2"},Q={key:1,class:"mb-0"},X={class:"col-1"},Y={key:1,class:"mb-0"},Z={key:0,class:"col-4 d-flex gap-2 justify-content-end"},ee=["disabled"],oe={__name:"BlindTypeRow",props:["id","type","collection","color","max_width","price","getBlindTypes"],setup(m){const b=N(),v=$(),y=U(),w="https://api-berjo.onrender.com",l=m,d=c(!1),_=()=>{d.value=!0},u=c(!1);let i=c(!0);const s=()=>{u.value=!u.value,i.value=!i.value},o=c(l.type),g=c(l.collection),E=c(l.color),T=c(l.max_width),C=c(l.price),M=async p=>{p.preventDefault();const a={id:l.id,type:o.value,collection:g.value,color:E.value,max_width:T.value,price:C.value};try{const n=await k(`${w}/blind_types`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},v,b);if(!n.ok){const R=await n.json();throw new Error(R.error||"Erro ao atualizar tipo")}y.addNotification("Tipo atualizado com sucesso!","success"),l.getBlindTypes(),s()}catch(n){console.error("Erro ao enviar os dados:",n.message),y.addNotification(n.message,"error")}},S=async()=>{try{const p=await k(`${w}/blind_types/${l.id}`,{method:"DELETE",headers:{"Content-Type":"application/json"}},v,b);if(!p.ok){const a=await p.json();throw new Error(a.error||"Erro ao excluir tipo")}y.addNotification("Tipo excluído com sucesso","success"),l.getBlindTypes()}catch(p){console.error("Erro ao excluir cliente:",p.message),y.addNotification(p.message,"error")}};return(p,a)=>(t(),r(V,null,[e("form",{onSubmit:z(M,["prevent"]),class:"row align-items-center mb-3 gx-2"},[e("div",F,[u.value?h((t(),r("input",{key:0,type:"text",class:"form-control","onUpdate:modelValue":a[0]||(a[0]=n=>o.value=n),id:"type",name:"type"},null,512)),[[f,o.value]]):(t(),r("p",G,x(m.type),1))]),e("div",W,[u.value?h((t(),r("input",{key:0,type:"text",class:"form-control","onUpdate:modelValue":a[1]||(a[1]=n=>g.value=n),id:"collection",name:"collection"},null,512)),[[f,g.value]]):(t(),r("p",J,x(m.collection),1))]),e("div",O,[u.value?h((t(),r("input",{key:0,type:"text",class:"form-control","onUpdate:modelValue":a[2]||(a[2]=n=>E.value=n),id:"color",name:"color"},null,512)),[[f,E.value]]):(t(),r("p",H,x(m.color),1))]),e("div",K,[u.value?h((t(),r("input",{key:0,type:"number",class:"form-control","onUpdate:modelValue":a[3]||(a[3]=n=>T.value=n),id:"max_width",name:"max_width",min:"0"},null,512)),[[f,T.value]]):(t(),r("p",Q,x(m.max_width),1))]),e("div",X,[u.value?h((t(),r("input",{key:0,type:"number",class:"form-control","onUpdate:modelValue":a[4]||(a[4]=n=>C.value=n),id:"price",name:"price",min:"0",step:"0.01"},null,512)),[[f,C.value]]):(t(),r("p",Y,"R$ "+x(m.price),1))]),D(v).userRole==="ADMIN"?(t(),r("div",Z,[e("button",{onClick:s,type:"button",class:"btn btn-outline-warning"},"Editar"),e("button",{type:"submit",class:"btn btn-success",disabled:D(i)},"Enviar",8,ee),e("button",{onClick:_,type:"button",class:"btn btn-outline-danger"},"Excluir")])):j("",!0)],32),(t(),B(A,{to:"body"},[d.value?(t(),B(q,{key:0,show:d.value,message:"Tem certeza que deseja excluir este tipo?",onConfirm:S,onClose:a[5]||(a[5]=n=>d.value=!1)},null,8,["show"])):j("",!0)]))],64))}},te={class:"container"},se={class:"search-section"},ae={__name:"BlindTypeView",setup(m){const b="https://api-berjo.onrender.com",v=$(),y=N(),w=U(),l=c([]),d=c(""),_=async()=>{try{const i=await k(`${b}/blind_types`,{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"},v,y);if(!i.ok){const o=await i.json();throw new Error(o.error||"Erro ao buscar clientes")}const s=await i.json();l.value=s}catch(i){console.log(i.message),w.addNotification(i.message,"error")}};L(_);const u=async i=>{if(i.preventDefault(),!d.value)return _();try{const s=await k(`${b}/blind_types/type/${d.value}`,{method:"GET",headers:{"Content-type":"application/json"}},v,y);if(!s.ok){const g=await s.json();throw new Error(g.error||"Erro ao buscar tipo")}const o=await s.json();l.value=o}catch(s){console.log(s.message),w.addNotification(s.message,"error")}};return(i,s)=>(t(),r("div",te,[e("div",se,[h(e("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>d.value=o),type:"text",id:"searchByType",class:"form-input",placeholder:"Buscar por tipo"},null,512),[[f,d.value]]),e("button",{onClick:u,class:"btn-secondary"},"Buscar")]),s[1]||(s[1]=e("div",{class:"header-row"},[e("span",null,"Tipo"),e("span",null,"Coleção"),e("span",null,"Cor"),e("span",null,"Largura Máx."),e("span",null,"Preço")],-1)),(t(!0),r(V,null,P(l.value,o=>(t(),B(oe,{key:o.id,id:o.id,type:o.type,collection:o.collection,color:o.color,max_width:o.max_width,price:o.price,getBlindTypes:_},null,8,["id","type","collection","color","max_width","price"]))),128))]))}},le=I(ae,[["__scopeId","data-v-79553b22"]]);export{le as default};
