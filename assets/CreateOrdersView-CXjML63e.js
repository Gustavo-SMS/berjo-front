import{r as y,s as D,j as k,c as m,d,e as t,f as v,v as f,i as I,n as R,p as $,k as T,F as C,l as V,t as q,_ as B,u as O,b as U,q as E,w as N,a as M,g as A}from"./index-DfWB3UVD.js";import{_ as j,a as F,b as L}from"./SelectType-DsfA-GJX.js";const x={class:"row mb-3"},P={class:"col-1"},z={class:"col-2"},H={class:"col-4",id:"selectBlindType"},J={class:"col-1"},Q={class:"col-1"},W={class:"col-1"},G={class:"col-1"},K=["value"],X={class:"col-12 mt-2"},Y={__name:"CreateOrderRow",props:["row"],emits:["updateRow","selectedBlindTypeId"],setup(n){const a=y(null),c=y(""),g=y(""),b=(l,e)=>{a.value=e[l.target.selectedIndex]||null},h=(l,e)=>{c.value=e[l.target.selectedIndex].id||""},r=D(()=>a.value?{Vertical:["Lateral","Central","Invertida"],Horizontal:["Dir","Esq"],Rolo:["Dir","Esq","Duplex"],Romana:["Dir","Esq","Duplex"],"Double Vision":["Dir","Esq","Duplex"]}[a.value]||[]:[]);return k(a,()=>{c.value="",g.value=""}),(l,e)=>(d(),m("div",x,[t("div",P,[v(t("input",{type:"number",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=o=>n.row.quantity=o),onInput:e[1]||(e[1]=o=>l.$emit("updateRow",{field:"quantity",value:n.row.quantity}))},null,544),[[f,n.row.quantity]])]),t("div",z,[I(j,{onSelectedOption:b})]),t("div",H,[a.value?(d(),R(F,{key:a.value,typeValue:a.value,onSelectedOption:h,onChange:e[2]||(e[2]=o=>l.$emit("updateRow",{field:"type_id",value:c.value}))},null,8,["typeValue"])):$("",!0)]),t("div",J,[v(t("input",{type:"number",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=o=>n.row.width=o),onInput:e[4]||(e[4]=o=>l.$emit("updateRow",{field:"width",value:n.row.width}))},null,544),[[f,n.row.width]])]),t("div",Q,[v(t("input",{type:"number",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=o=>n.row.height=o),onInput:e[6]||(e[6]=o=>l.$emit("updateRow",{field:"height",value:n.row.height}))},null,544),[[f,n.row.height]])]),t("div",W,[v(t("input",{type:"number",class:"form-control","onUpdate:modelValue":e[7]||(e[7]=o=>n.row.command_height=o),onInput:e[8]||(e[8]=o=>l.$emit("updateRow",{field:"command_height",value:n.row.command_height}))},null,544),[[f,n.row.command_height]])]),t("div",G,[r.value.length?v((d(),m("select",{key:0,class:"form-control","onUpdate:modelValue":e[9]||(e[9]=o=>n.row.model=o),onChange:e[10]||(e[10]=o=>l.$emit("updateRow",{field:"model",value:n.row.model}))},[e[13]||(e[13]=t("option",{value:"",disabled:""},null,-1)),(d(!0),m(C,null,V(r.value,o=>(d(),m("option",{key:o,value:o},q(o),9,K))),128))],544)),[[T,n.row.model]]):$("",!0)]),t("div",X,[v(t("input",{type:"text",class:"form-control",placeholder:"Observações","onUpdate:modelValue":e[11]||(e[11]=o=>n.row.observation=o),onInput:e[12]||(e[12]=o=>l.$emit("updateRow",{field:"observation",value:n.row.observation}))},null,544),[[f,n.row.observation]])])]))}},Z={class:"container"},_={key:0,class:"mb-3"},ee={__name:"CreateOrdersView",setup(n){const a="https://api-berjo.onrender.com",c=O(),g=M(),b=U(),h=y(""),r=y([]);function l(){r.value.push({quantity:"",type_id:"",width:"",height:"",command_height:"",model:"",observation:""})}function e(u,s,i){r.value[u][s]=i}function o(u,s){h.value=s[u.target.selectedIndex].id}const S=async u=>{u.preventDefault();const s={customer:h.value,blinds:r.value};try{const i=await A(`${a}/orders`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)},c,g);if(!i.ok){const p=await i.json();throw new Error(p.error||"Erro ao criar pedido")}b.addNotification("Pedido criado com sucesso!","success")}catch(i){console.log(i.message),b.addNotification(i.message,"error")}};return(u,s)=>(d(),m("div",Z,[t("form",{onSubmit:N(S,["prevent"])},[E(c).userRole==="ADMIN"?(d(),m("div",_,[s[0]||(s[0]=t("label",{for:"selectCustomer",class:"form-label"},"Cliente",-1)),I(L,{id:"selectCustomer",onSelectedOption:o})])):$("",!0),s[1]||(s[1]=t("div",{class:"header-row"},[t("span",null,"Quantidade"),t("span",null,"Tipo"),t("span",null,"Coleção - Cor"),t("span",null,"Largura"),t("span",null,"Altura"),t("span",null,"Alt. Comando"),t("span",null,"Modelo")],-1)),(d(!0),m(C,null,V(r.value,(i,p)=>(d(),R(Y,{key:p,row:i,onUpdateRow:w=>e(p,w.field,w.value),onSelectedBlindTypeId:w=>u.selectedBlindTypeId(p,w.field,w.value)},null,8,["row","onUpdateRow","onSelectedBlindTypeId"]))),128)),s[2]||(s[2]=t("button",{type:"submit",class:"btn btn-primary w-100 mt-4"},"Enviar",-1))],32),t("button",{onClick:l,class:"btn btn-outline-secondary w-100 mt-3"},"Add linha")]))}},ne=B(ee,[["__scopeId","data-v-8962ed51"]]);export{ne as default};
