import{_ as I,u as $,b as q,r as l,c as a,e as s,n as T,f as u,v as d,t as c,q as U,p as S,w as F,T as P,F as H,g as M,a as J,d as o}from"./index-DQ8yE_dc.js";import{C as L}from"./ConfirmationModal-jBfguLHW.js";const O={key:1},W={key:1},Z={key:1},_={key:1},G={key:1},K={key:1},Q={key:1},X={key:1},Y={key:1},ee={class:"actions"},te=["disabled"],oe={__name:"CustomerRow",props:["id","name","email","phone","street","house_number","city","district","zip","debt","getCustomers"],setup(r){const D=J(),p=$(),v=q(),V="https://api-berjo.onrender.com",n=r,y=l(!1),j=()=>{y.value=!0},i=l(!1);let b=l(!0);const z=()=>{i.value=!i.value,b.value=!b.value},f=l(n.name),k=l(n.email),h=l(n.phone),C=l(n.street),w=l(n.house_number),g=l(n.city),E=l(n.district),x=l(n.zip),N=l(n.debt),R=async m=>{m.preventDefault();const e={id:n.id,name:f.value,email:k.value,phone:h.value,street:C.value,house_number:w.value,city:g.value,district:E.value,zip:x.value,debt:N.value};try{const t=await M(`${V}/customers`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},p,D);if(!t.ok){const B=await t.json();throw new Error(B.error||"Erro ao atualizar cliente")}v.addNotification("Cliente atualizado com sucesso!","success"),n.getCustomers(),z()}catch(t){console.error("Erro ao enviar os dados:",t.message),v.addNotification(t.message,"error")}},A=async()=>{try{const m=await M(`${V}/customers/${n.id}`,{method:"DELETE",headers:{"Content-Type":"application/json"}},p,D);if(!m.ok){const e=await m.json();throw new Error(e.error||"Erro ao excluir cliente")}v.addNotification("Cliente excluÃ­do com sucesso","success"),n.getCustomers()}catch(m){console.error("Erro ao excluir cliente:",m.message),v.addNotification(m.message,"error")}};return(m,e)=>(o(),a(H,null,[s("form",{onSubmit:F(R,["prevent"]),class:"customer-row"},[s("div",null,[i.value?u((o(),a("input",{key:0,type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=t=>f.value=t),id:"name",name:"name"},null,512)),[[d,f.value]]):(o(),a("p",O,c(r.name),1))]),s("div",null,[i.value?u((o(),a("input",{key:0,type:"email",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=t=>k.value=t),id:"email",name:"email"},null,512)),[[d,k.value]]):(o(),a("p",W,c(r.email),1))]),s("div",null,[i.value?u((o(),a("input",{key:0,type:"tel",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=t=>h.value=t),id:"phone",name:"phone"},null,512)),[[d,h.value]]):(o(),a("p",Z,c(r.phone),1))]),s("div",null,[i.value?u((o(),a("input",{key:0,type:"text",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=t=>C.value=t),id:"street",name:"street"},null,512)),[[d,C.value]]):(o(),a("p",_,c(r.street),1))]),s("div",null,[i.value?u((o(),a("input",{key:0,type:"number",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=t=>w.value=t),id:"house_number",name:"house_number"},null,512)),[[d,w.value]]):(o(),a("p",G,c(r.house_number),1))]),s("div",null,[i.value?u((o(),a("input",{key:0,type:"text",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=t=>g.value=t),id:"city",name:"city"},null,512)),[[d,g.value]]):(o(),a("p",K,c(r.city),1))]),s("div",null,[i.value?u((o(),a("input",{key:0,type:"text",class:"form-control","onUpdate:modelValue":e[6]||(e[6]=t=>E.value=t),id:"district",name:"district"},null,512)),[[d,E.value]]):(o(),a("p",Q,c(r.district),1))]),s("div",null,[i.value?u((o(),a("input",{key:0,type:"number",class:"form-control","onUpdate:modelValue":e[7]||(e[7]=t=>x.value=t),id:"zip",name:"zip"},null,512)),[[d,x.value]]):(o(),a("p",X,c(r.zip),1))]),s("div",null,[i.value&&U(p).userRole==="ADMIN"?u((o(),a("input",{key:0,type:"number",class:"form-control","onUpdate:modelValue":e[8]||(e[8]=t=>N.value=t),id:"debt",name:"debt"},null,512)),[[d,N.value]]):(o(),a("p",Y,c(r.debt),1))]),s("div",ee,[s("button",{onClick:z,type:"button",class:"btn btn-danger col-1"},"Editar"),s("button",{type:"submit",class:"btn btn-primary col-1",disabled:U(b)},"Enviar",8,te),U(p).userRole==="ADMIN"?(o(),a("button",{key:0,onClick:j,type:"button",class:"btn btn-warning col-1"},"Excluir")):S("",!0)])],32),(o(),T(P,{to:"body"},[y.value?(o(),T(L,{key:0,show:y.value,message:"Tem certeza que deseja excluir este cliente?",onConfirm:A,onClose:e[9]||(e[9]=t=>y.value=!1)},null,8,["show"])):S("",!0)]))],64))}},se=I(oe,[["__scopeId","data-v-f4575b0b"]]);export{se as C};
