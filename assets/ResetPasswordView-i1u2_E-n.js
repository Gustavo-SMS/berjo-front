import{_ as w,b as v,r as d,o as h,m as P,a as b,c as y,e as o,f as u,v as f,w as N,d as S}from"./index-DmVvP4hk.js";const k={class:"reset-container"},_={class:"form-group"},g={class:"form-group"},R={__name:"ResetPasswordView",setup(V){const c="https://api-berjo.onrender.com",p=P(),l=b(),r=v(),t=d(""),a=d(""),n=d("");h(()=>{n.value=p.query.token||"",n.value||(r.addNotification("Token inválido.","error"),l.push("/"))});const m=async()=>{if(t.value!==a.value){r.addNotification("As senhas não coincidem.","error");return}try{const s=await fetch(`${c}/users/resetPassword`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:n.value,newPassword:t.value})}),e=await s.json();if(!s.ok)throw new Error(e.error||"Erro ao redefinir senha");r.addNotification("Senha redefinida com sucesso!","success"),l.push("/login")}catch(s){r.addNotification(s.message,"error")}};return(s,e)=>(S(),y("main",k,[o("form",{class:"reset-form",onSubmit:N(m,["prevent"])},[e[4]||(e[4]=o("h1",{class:"reset-title"},"Redefinir Senha",-1)),o("div",_,[e[2]||(e[2]=o("label",{for:"newPassword"},"Nova Senha",-1)),u(o("input",{id:"newPassword",type:"password","onUpdate:modelValue":e[0]||(e[0]=i=>t.value=i),class:"form-input",placeholder:"Digite a nova senha",required:""},null,512),[[f,t.value]])]),o("div",g,[e[3]||(e[3]=o("label",{for:"confirmPassword"},"Confirmar Senha",-1)),u(o("input",{id:"confirmPassword",type:"password","onUpdate:modelValue":e[1]||(e[1]=i=>a.value=i),class:"form-input",placeholder:"Confirme a nova senha",required:""},null,512),[[f,a.value]])]),e[5]||(e[5]=o("button",{class:"btn-primary full-width",type:"submit"},"Redefinir",-1))],32)]))}},T=w(R,[["__scopeId","data-v-2945d0b1"]]);export{T as default};
