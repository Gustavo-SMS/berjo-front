import{C as h}from"./CustomerRow-BSXXBnaP.js";import{_ as y,u as _,b,r as w,o as C,c as n,e as c,p as N,h as g,q as B,F as E,l as k,g as m,a as A,d as o,n as j}from"./index-DQ8yE_dc.js";import"./ConfirmationModal-jBfguLHW.js";const S={class:"container"},R={class:"box"},x={key:0,class:"search-bar"},D={__name:"CustomersView",setup(V){const l="https://api-berjo.onrender.com",r=_(),u=A(),v=b(),d=w([]),i=async()=>{try{let t=`${l}/customers`;r.userRole==="CUSTOMER"&&(t+=`/${r.customerId}`);const a=await m(t,{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"},r,u);if(!a.ok){const s=await a.json();throw new Error(s.error||"Erro ao buscar clientes")}const e=await a.json();d.value=Array.isArray(e)?e:[e]}catch(t){console.log(t.message),v.addNotification(t.message,"error")}};C(i);const p=async t=>{t.preventDefault();const a=document.querySelector("#searchByName");if(!a.value)return i();try{const e=await m(`${l}/customers/name/${a.value}`,{method:"GET",headers:{"Content-type":"application/json"}},r,u);if(!e.ok){const f=await e.json();throw new Error(f.error||"Erro ao buscar cliente")}const s=await e.json();d.value=Array.isArray(s)?s:[s]}catch(e){console.log(e.message),v.addNotification(e.message,"error")}};return(t,a)=>(o(),n("div",S,[c("div",R,[B(r).userRole==="ADMIN"?(o(),n("div",x,[a[0]||(a[0]=c("input",{type:"text",id:"searchByName",class:"form-control",placeholder:"Buscar por nome"},null,-1)),c("button",{onClick:p,class:"btn btn-primary"},"Buscar")])):N("",!0),a[1]||(a[1]=g('<div class="customer-header" data-v-d21811af><div data-v-d21811af>Nome</div><div data-v-d21811af>Email</div><div data-v-d21811af>Telefone</div><div data-v-d21811af>Rua</div><div data-v-d21811af>Nº</div><div data-v-d21811af>Cidade</div><div data-v-d21811af>Bairro</div><div data-v-d21811af>CEP</div><div data-v-d21811af>Dívida</div><div data-v-d21811af>Ações</div></div>',1)),(o(!0),n(E,null,k(d.value,e=>(o(),j(h,{key:e.id,id:e.id,name:e.name,email:e.email,phone:e.phone,street:e.address.street,house_number:e.address.house_number,city:e.address.city,district:e.address.district,zip:e.address.zip,debt:e.debt,getCustomers:i},null,8,["id","name","email","phone","street","house_number","city","district","zip","debt"]))),128))])]))}},I=y(D,[["__scopeId","data-v-d21811af"]]);export{I as default};
